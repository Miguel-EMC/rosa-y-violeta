<div class="sm:inset-0 flex flex-col flex-auto min-w-0 bg-card dark:bg-transparent overflow-auto">
    <div class="w-full max-w-[98%] mx-auto p-4 md:p-6 flex flex-col flex-1">
        <!-- Modern Header with Perfect Alignment -->
        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4">
            <div class="text-4xl font-extrabold tracking-tight bg-gradient-to-r from-blue-600 to-indigo-500 bg-clip-text text-transparent">
                Inventario
            </div>
            <div class="flex items-center space-x-3 w-full sm:w-auto">
                <!-- Search with matched height -->
                <div class="relative flex-1 sm:flex-initial">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <mat-icon [svgIcon]="'heroicons_solid:magnifying-glass'" class="text-gray-400 dark:text-gray-500"></mat-icon>
                    </div>
                    <input
                        [formControl]="searchInputControl"
                        class="w-full h-10 pl-10 pr-4 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                        placeholder="Buscar productos"
                        autocomplete="off">
                </div>

                <!-- Add button with matched height -->
                <button
                    mat-flat-button
                    color="primary"
                    (click)="createProduct()"
                    class="h-10 px-4 rounded-lg shadow-sm bg-blue-600 hover:bg-blue-700 transition-colors">
                    <mat-icon [svgIcon]="'heroicons_outline:plus'" class="mr-1.5"></mat-icon>
                    <span>Agregar</span>
                </button>
            </div>
        </div>

        <!-- Table -->
        <div class="overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-sm">
            <ng-container *ngIf="externalProducts as products">
                <ng-container *ngIf="products.length > 0; else noProducts">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 sticky top-0 z-10">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">ID</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">SKU</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider w-2/5">Nombre</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Marca</th>
                                <th class="px-4 py-3 text-left text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Talla</th>
                                <th class="px-4 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Stock</th>
                                <th class="px-4 py-3 text-right text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Precio Mayoreo</th>
                                <th class="px-4 py-3 text-right text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Precio Unitario</th>
                                <th class="px-4 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Estado</th>
                                <th class="px-4 py-3 text-center text-xs font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider">Acciones</th>
                            </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-100 dark:divide-gray-800">
                            <tr *ngFor="let product of products; trackBy: trackByFn"
                                class="hover:bg-blue-50 dark:hover:bg-blue-950 transition">
                                <td class="px-4 py-3 font-mono text-sm text-gray-500 dark:text-gray-400">{{ product.id }}</td>
                                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">{{ product.sku }}</td>
                                <td class="px-4 py-3 font-semibold text-gray-900 dark:text-white w-2/5">{{ product.name }}</td>
                                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">{{ product.brand }}</td>
                                <td class="px-4 py-3 text-sm text-gray-700 dark:text-gray-300">{{ product.size }}</td>
                                <td class="px-4 py-3 text-center text-sm"
                                    [ngClass]="{'text-red-600 font-bold': product.stock < 5, 'text-gray-700 dark:text-gray-300': product.stock >= 5}">
                                    {{ product.stock }}
                                </td>
                                <td class="px-4 py-3 text-right text-sm text-blue-700 dark:text-blue-300">{{ product.wholesale_price | currency:'USD':'symbol':'1.2-2' }}</td>
                                <td class="px-4 py-3 text-right text-sm text-blue-700 dark:text-blue-300">{{ product.unit_price | currency:'USD':'symbol':'1.2-2' }}</td>
                                <td class="px-4 py-3 text-center">
                                    <span *ngIf="product.active; else inactive"
                                          class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Activo</span>
                                    <ng-template #inactive>
                                        <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Inactivo</span>
                                    </ng-template>
                                </td>
                                <td class="px-4 py-3 text-center flex gap-2 justify-center">
                                    <button mat-icon-button color="primary" (click)="openModal(product.id)" class="hover:bg-blue-100 dark:hover:bg-blue-900 rounded-full">
                                        <mat-icon [svgIcon]="'heroicons_outline:pencil-square'"></mat-icon>
                                    </button>
                                    <button mat-icon-button color="warn" (click)="deleteSelectedProduct(product.id)" class="hover:bg-red-100 dark:hover:bg-red-900 rounded-full">
                                        <mat-icon [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                    </button>                                    
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </ng-container>
            </ng-container>
            <ng-template #noProducts>
                <div class="p-12 text-2xl font-semibold text-center text-gray-400 dark:text-gray-500">Â¡No hay productos!</div>
            </ng-template>
        </div>
    </div>
</div>


<div class="p-6 z-100"> 
    <app-edit-product
    [isVisible] = "isModalVisible"
    (close) = closeModal()
    [productId] = "productId"
    ></app-edit-product>
</div>